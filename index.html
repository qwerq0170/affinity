<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Seamless CSS-only animation demo</title>
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=5.0,user-scalable=yes">
<style>
  :root{
    --delay:.15s;
    --dur:.9s;
    --ease:cubic-bezier(.4,0,.2,1);
    --card-width:min(45vw, 280px); /* Dynamic sizing: 45% of viewport or 280px max */
    --card-height:calc(var(--card-width) * 1.31); /* Maintain aspect ratio */
    --gap-size:min(2vw, 1.5rem); /* Responsive gap */
  }
  
  /* Extra small phones (320px and below) */
  @media (max-width: 360px) {
    :root {
      --card-width: 140px;
    }
    h1{font-size:1.8rem !important}
    p{font-size:1rem !important}
  }
  
  /* Small phones */
  @media (max-width: 480px) {
    :root {
      --card-width: min(42vw, 180px);
      --gap-size: 0.75rem;
    }
  }
  
  /* Tablets */
  @media (min-width: 769px) and (max-width: 1024px) {
    :root {
      --card-width: 220px;
    }
  }
  
  *{
    box-sizing:border-box;
    margin:0;
    padding:0;
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif
  }
  
  html{
    overflow-x:hidden; /* Prevent horizontal scroll */
    width:100%;
    max-width:100vw;
  }
  
  body{
    min-height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    background:#f5f7fa;
    overflow-x:hidden; /* Critical: hide overflow */
    width:100%;
    max-width:100vw;
    touch-action:pan-y;
    -webkit-overflow-scrolling:touch;
  }
  
  .hero{
    width:95%; /* Slightly wider */
    max-width:1200px;
    text-align:center;
    padding:1rem 0.5rem;
    margin:0 auto;
    overflow:hidden; /* Contain children */
  }
  
  .hero>*{
    opacity:0;
    transform:translateY(40px);
    animation:fadeUp var(--dur) var(--ease) forwards;
  }
  
  h1{
    font-size:clamp(1.8rem, 6vw, 4rem);
    font-weight:700;
    color:#111;
    line-height:1.2;
    word-wrap:break-word; /* Prevent overflow */
  }
  
  p{
    font-size:clamp(1rem, 3vw, 1.25rem);
    color:#444;
    margin:.5em auto 1.2em;
    max-width:90%; /* Prevent text overflow */
  }
  
  h1{animation-delay:calc(var(--delay)*1)}
  p{animation-delay:calc(var(--delay)*2)}
  
  .cards-container{
    display:flex;
    justify-content:center;
    align-items:center;
    gap:var(--gap-size);
    margin:2rem auto;
    animation-delay:calc(var(--delay)*3);
    flex-wrap:wrap;
    width:100%;
    max-width:100%; /* Ensure no overflow */
    overflow:hidden;
  }
  
  .card-wrap{
    perspective:800px; /* Reduced for mobile */
    -webkit-perspective:800px;
    width:var(--card-width);
    height:var(--card-height);
    flex-shrink:1; /* Allow shrinking */
    max-width:100%; /* Prevent overflow */
  }
  
  .card{
    width:100%;
    height:100%;
    background:#fff center / contain no-repeat;
    border-radius:16px;
    box-shadow:0 15px 30px -8px rgba(0,0,0,.25);
    transform-style:preserve-3d;
    -webkit-transform-style:preserve-3d;
    animation:rotateCard 8s linear infinite;
    will-change:transform;
    -webkit-backface-visibility:hidden;
    backface-visibility:hidden;
    transition:opacity 0.3s ease;
  }
  
  @keyframes fadeUp{to{opacity:1;transform:translateY(0)}}
  @keyframes rotateCard{
    0%{transform:rotateY(0deg) translateZ(0)}
    100%{transform:rotateY(360deg) translateZ(0)}
  }
  
  .btn{
    display:inline-block;
    margin-top:1.5rem;
    padding:clamp(0.8rem, 3vw, 0.9rem) clamp(1.8rem, 5vw, 2.2rem);
    font-size:clamp(1rem, 3vw, 1.1rem);
    font-weight:600;
    color:#fff;
    background:#111;
    border-radius:50px;
    cursor:pointer;
    position:relative;
    overflow:hidden;
    animation-delay:calc(var(--delay)*4);
    user-select:none;
    -webkit-user-select:none;
    touch-action:manipulation;
    -webkit-tap-highlight-color:transparent;
    min-height:44px;
    min-width:120px;
    border:none;
    transition:background-color .3s ease, transform .1s ease;
  }
  
  .btn:hover{background-color:#333}
  .btn:active{background-color:#000;transform:scale(0.95)}
  
  .btn::after{
    content:"";
    position:absolute;
    inset:0;
    border-radius:50px;
    background:#fff;
    transform:scale(0);
    opacity:0;
    transition:transform .4s var(--ease),opacity .4s;
  }
  
  .btn:hover::after{transform:scale(1);opacity:.2}
  
  /* Reduced motion accessibility */
  @media (prefers-reduced-motion: reduce) {
     * {
       animation-duration: 0.01ms !important;
       animation-iteration-count: 1 !important;
       transition-duration: 0.01ms !important;
     }
     .card {
       animation: none !important;
       transform: rotateY(0deg) !important;
     }
  }
</style>
</head>
<body>
<div class="hero">
  <h1>Seamless motion</h1>
  <p>Pure HTML/CSS, 60 fps, zero judder</p>
  
  <div class="cards-container">
    <div class="card-wrap"><div class="card" data-index="0"></div></div>
    <div class="card-wrap"><div class="card" data-index="1"></div></div>
    <div class="card-wrap"><div class="card" data-index="2"></div></div>
  </div>
  
  <button class="btn">Tap me</button>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const button = document.querySelector('.btn');
    const cards = document.querySelectorAll('.card');
    const images = ['bianca1.jpeg', 'bianca2.jpeg', 'bianca3.jpeg'];
    
    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }
    
    // Initialize
    cards.forEach((card, index) => {
      card.style.backgroundImage = `url("${images[index]}")`;
    });
    
    // Click handler with debouncing
    let isProcessing = false;
    button.addEventListener('click', function() {
      if (isProcessing) return;
      isProcessing = true;
      setTimeout(() => { isProcessing = false; }, 400);
      
      const shuffled = shuffle([...images]);
      
      cards.forEach((card, index) => {
        card.style.opacity = '0';
        setTimeout(() => {
          card.style.backgroundImage = `url("${shuffled[index]}")`;
          card.style.opacity = '1';
        }, 150);
      });
    });
  });
</script>
</body>
</html>
